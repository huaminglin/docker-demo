sudo docker exec postgres-lock-demo_client_1 bash -c /sql/deadlock.sh
sleep 10 seconds ...
BEGIN
BEGIN
UPDATE 1
          ?column?          | pg_sleep 
----------------------------+----------
 sql 2: sleep 1 seconds ... | 
(1 row)

UPDATE 1
          ?column?          | pg_sleep 
----------------------------+----------
 sql 1: sleep 2 seconds ... | 
(1 row)

psql:/sql/deadlock-2.sql:4: ERROR:  deadlock detected
DETAIL:  Process 81 waits for ShareLock on transaction 496; blocked by process 82.
Process 82 waits for ShareLock on transaction 497; blocked by process 81.
HINT:  See server log for query details.
CONTEXT:  while updating tuple (0,1) in relation "t_deadlock"
UPDATE 1
   ?column?    
---------------
 sql 1: commit
(1 row)

psql:/sql/deadlock-2.sql:6: ERROR:  current transaction is aborted, commands ignored until end of transaction block
ROLLBACK
COMMIT
