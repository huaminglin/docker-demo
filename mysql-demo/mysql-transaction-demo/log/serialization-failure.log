sql 1   id      name
sql 1   0       name0
sql 1: sleep 2 second
sql 1: sleep 2 second
sleep(0.5)
0
sql 2   id      name
sql 2   0       name0
sql 2: sleeping 1 seconds ...
sql 2: sleeping 1 seconds ...
sleep(1)
0
sql 2 first read: before txn-1 update   id      name
sql 2 first read: before txn-1 update   0       name0
sql 2: sleeping 2 seconds ...
sql 2: sleeping 2 seconds ...
sleep(2)
0
sql1 updated
sql1 updated
sql 1: sleep 5 seconds ...
sql 1: sleep 5 seconds ...
sleep(2)
0
sql 2 second read: when txn-1 is runing update  id      name
sql 2 second read: when txn-1 is runing update  0       name0
sql 2: sleeping 5 seconds ...
sql 2: sleeping 5 seconds ...
sleep(5)
0
sql1 inserted
sql1 inserted
sql 1   id      name
sql 1   0       txn1
sql 1   0       txn1
sql 1: commit
sql 1: commit
sleep(5)
0
sql 2 third read: after txn-1 update    id      name
sql 2 third read: after txn-1 update    0       name0
sql 2 third read: all rows      id      name
sql 2 third read: all rows      0       name0
sql2 updated
sql2 updated
sql 2: commit
sql 2: commit
sql 2 last read: all rows       id      name
sql 2 last read: all rows       0       txn2
sql 2 last read: all rows       0       txn2
